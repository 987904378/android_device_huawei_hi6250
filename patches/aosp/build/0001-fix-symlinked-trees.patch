From 1fee00bf2100ae8a39f02c86dd8be1fb4bcacd5b Mon Sep 17 00:00:00 2001
From: Meticulus <theonejohnnyd@gmail.com>
Date: Tue, 11 Apr 2017 15:42:04 -0500
Subject: [PATCH] fix symlinked trees

---
 core/envsetup.mk | 4 ++--
 core/product.mk  | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/core/envsetup.mk b/core/envsetup.mk
index bf04455..159581b 100644
--- a/core/envsetup.mk
+++ b/core/envsetup.mk
@@ -158,8 +158,8 @@ SDK_HOST_ARCH := x86
 board_config_mk := \
 	$(strip $(wildcard \
 		$(SRC_TARGET_DIR)/board/$(TARGET_DEVICE)/BoardConfig.mk \
-		$(shell test -d device && find device -maxdepth 4 -path '*/$(TARGET_DEVICE)/BoardConfig.mk') \
-		$(shell test -d vendor && find vendor -maxdepth 4 -path '*/$(TARGET_DEVICE)/BoardConfig.mk') \
+		$(shell test -d device && find -L device -maxdepth 4 -path '*/$(TARGET_DEVICE)/BoardConfig.mk') \
+		$(shell test -d vendor && find -L vendor -maxdepth 4 -path '*/$(TARGET_DEVICE)/BoardConfig.mk') \
 	))
 ifeq ($(board_config_mk),)
   $(error No config file found for TARGET_DEVICE $(TARGET_DEVICE))
diff --git a/core/product.mk b/core/product.mk
index e97cba4..edd0ad7 100644
--- a/core/product.mk
+++ b/core/product.mk
@@ -28,8 +28,8 @@
 # $(call ) isn't necessary.
 #
 define _find-android-products-files
-$(shell test -d device && find device -maxdepth 6 -name AndroidProducts.mk) \
-  $(shell test -d vendor && find vendor -maxdepth 6 -name AndroidProducts.mk) \
+$(shell test -d device && find -L device -maxdepth 6 -name AndroidProducts.mk) \
+  $(shell test -d vendor && find -L vendor -maxdepth 6 -name AndroidProducts.mk) \
   $(SRC_TARGET_DIR)/product/AndroidProducts.mk
 endef
 
-- 
1.9.1

